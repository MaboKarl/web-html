<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Guest Dashboard</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>
<div class="dashboard">
    <div class="header">
        <div class="header-content">
            <div class="header-left">
                <svg class="icon-lg" style="color:#4f46e5;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/>
                </svg>
                <div><h1>Guest Dashboard</h1><p class="subtitle" id="guestSubtitle">Welcome</p></div>
            </div>
            <div class="header-right">
                <button class="btn-danger" onclick="handleLogout()">Logout</button>
            </div>
        </div>
    </div>

    <div class="container py-8">
        <div class="alert alert-info" style="margin-bottom:1.5rem;">
            You are viewing the inventory as a guest. You can browse items but cannot make purchases or modify inventory.
        </div>

        <div class="controls">
            <div class="controls-row">
                <div class="search-wrapper">
                    <svg class="icon input-icon" style="left:0.75rem;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg>
                    <input type="text" id="searchInput" class="input-with-icon" placeholder="Search by name or brand...">
                </div>
                <select id="categoryFilter">
                    <option>All</option><option>CPU</option><option>GPU</option><option>RAM</option><option>Storage</option><option>Motherboard</option><option>PSU</option><option>Case</option>
                </select>
            </div>
        </div>

        <div id="productsGrid" class="product-grid"></div>
        <div id="noItems" class="empty-state hidden">No items found matching your search criteria.</div>
    </div>
</div>

<script src="js/state.js"></script>
<script src="js/utils.js"></script>
<script src="js/cart.js"></script>
<script>
loadCurrentUser();
if (!STATE.currentUser || STATE.currentUser.role !== 'guest') {
    window.location.href = 'index.html';
}
document.getElementById('guestSubtitle').textContent = 'Welcome, ' + STATE.currentUser.name;
renderProductsGrid();
document.getElementById('searchInput').addEventListener('input', renderProductsGrid);
document.getElementById('categoryFilter').addEventListener('change', renderProductsGrid);
</script>
</body>
</html>
